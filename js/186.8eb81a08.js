"use strict";(self["webpackChunkvue_mall"]=self["webpackChunkvue_mall"]||[]).push([[186],{1186:function(t,e,i){i.r(e),i.d(e,{default:function(){return F}});var s=function(){var t=this,e=t._self._c;return e("div",[e("CateFilter",{attrs:{id:t.id,cateList:t.cateList,activeFilter:t.activeFilter},on:{filterChange:t.getFilter}}),e("div",{staticClass:"show"},[e("div",{staticClass:"container"},[e("div",{staticClass:"rank"},[e("button",{class:{active:null===t.activeRank},attrs:{type:"button"},on:{click:function(e){return t.toggleRank(null,"")}}},[t._v(" 默认排序 ")]),e("button",{class:{active:0===t.activeRank},attrs:{type:"button"},on:{click:function(e){return t.toggleRank(0,"publishTime")}}},[t._v(" 最新商品 ")]),e("button",{class:{active:1===t.activeRank},attrs:{type:"button"},on:{click:function(e){return t.toggleRank(1,"orderNum")}}},[t._v(" 销量最高 ")]),e("button",{class:{active:2===t.activeRank},attrs:{type:"button"},on:{click:function(e){return t.toggleRank(2,"evaluateNum")}}},[t._v(" 评论最多 ")]),e("button",{class:{active:3===t.activeRank},attrs:{type:"button"},on:{click:function(e){return t.toggleRank(3,"price")}}},[t._v(" 价格"),"price"===t.queryInfo.sortField&&"desc"===t.queryInfo.sortMethod?e("i",{staticClass:"el-icon-bottom"}):t._e(),"price"===t.queryInfo.sortField&&"asc"===t.queryInfo.sortMethod?e("i",{staticClass:"el-icon-top"}):t._e()])]),e("CateGoods",{attrs:{goodsList:t.goodsList}})],1)])],1)},a=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"filter"},[e("div",{staticClass:"container"},[e("div",{staticClass:"head"},[t._v("分类")]),e("div",{staticClass:"body"},[e("span",{class:{active:null===t.activeFilter},on:{click:function(e){return t.toggleFilter(null,t.id)}}},[t._v("全部")]),t._l(t.cateList,(function(i,s){return e("span",{key:s,class:{active:t.activeFilter===s},on:{click:function(e){return t.toggleFilter(s,i.id)}}},[t._v(t._s(i.name))])}))],2)])])},n=[],c={props:["id","cateList","activeFilter"],methods:{toggleFilter(t,e){this.$emit("filterChange",{index:t,id:e})}}},l=c,r=i(1001),u=(0,r.Z)(l,o,n,!1,null,"00f7c5ad",null),d=u.exports,v=function(){var t=this,e=t._self._c;return e("div",{staticClass:"goods"},[e("ul",t._l(t.goodsList,(function(i){return e("li",{key:i.id},[e("div",{staticClass:"item"},[e("router-link",{attrs:{to:`/goods/${i.id}`}},[e("div",{staticClass:"image"},[e("el-image",{attrs:{src:i.picture,lazy:""}})],1)]),e("p",{staticClass:"name ellipsis-2"},[t._v(" "+t._s(i.name)+" ")]),e("p",{staticClass:"desc ellipsis"},[t._v(t._s(i.desc))]),e("p",{staticClass:"price"},[t._v("¥"+t._s(i.price))])],1)])})),0)])},h=[],g={props:["goodsList"]},f=g,p=(0,r.Z)(f,v,h,!1,null,"b98cecaa",null),y=p.exports,k={components:{CateFilter:d,CateGoods:y},props:["id"],data(){return{activeFilter:null,activeRank:null,goodsList:[],cateList:[],queryInfo:{categoryId:this.id,sortField:"",sortMethod:"desc",pageSize:100}}},methods:{async getCateList(){const{data:t}=await this.$axios.get("/category",{params:{id:this.id}});this.cateList=t.result.children},async getGoodsList(){const{data:t}=await this.$axios.post("/category/goods",this.queryInfo);this.goodsList=t.result.items},getFilter(t){this.activeFilter=t.index,this.queryInfo.categoryId=t.id},toggleRank(t,e){this.activeRank=t,this.queryInfo.sortMethod="price"===e&&"desc"===this.queryInfo.sortMethod?"asc":"desc",this.queryInfo.sortField=e}},created(){this.getGoodsList(),this.getCateList()},watch:{id:{handler(){this.activeFilter=null,this.activeRank=null,this.queryInfo.categoryId=this.id,this.queryInfo.sortField="",this.queryInfo.sortMethod="desc"}},queryInfo:{deep:!0,handler(){this.getGoodsList(),this.getCateList()}}}},_=k,C=(0,r.Z)(_,s,a,!1,null,"16fd1f9c",null),F=C.exports}}]);
//# sourceMappingURL=186.8eb81a08.js.map